<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LETPIX SHOP | ÙØ±ÙˆØ´Ú¯Ø§Ù‡ ØªØ®ØµØµÛŒ Ù¾Ù†Ù„</title>
    <style>
        :root {
            --bg-body: #0b0e14;
            --bg-card: #161a23;
            --accent: #0088ff;
            --text-main: #e1e1e1;
            --text-dim: #a0a0a0;
            --danger: #ff4444;
        }

        * { box-sizing: border-box; }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            font-family: 'Tahoma', sans-serif;
            margin: 0; padding: 0;
            line-height: 1.6;
            overflow-x: hidden;
        }

        header {
            background: #12151e;
            padding: 15px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #1f2330;
            position: sticky; top: 0; z-index: 1000;
        }

        .logo { font-size: 1.4rem; font-weight: bold; color: var(--accent); letter-spacing: 1px; }

        .cart-box {
            position: relative;
            background: #1f2330;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
        }

        .cart-count {
            background: var(--accent);
            color: white;
            padding: 2px 7px;
            border-radius: 50%;
            font-size: 0.75rem;
            position: absolute; top: -8px; right: -8px;
            box-shadow: 0 0 10px rgba(0, 136, 255, 0.5);
        }

        .search-area { padding: 20px 5% 10px 5%; width: 100%; display: flex; justify-content: center; }
        #productSearch {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid #25293a;
            background: #161a23;
            color: white;
            outline: none;
            text-align: center;
        }

        .section-divider {
            display: flex;
            align-items: center;
            margin: 30px 5% 15px 5%;
            color: var(--accent);
            font-weight: bold;
            font-size: 0.9rem;
        }
        .section-divider::before, .section-divider::after {
            content: "";
            flex: 1;
            height: 1px;
            background: #25293a;
        }
        .section-divider span { padding: 0 15px; }

        .container { padding: 0 5% 20px 5%; }
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .product-card {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #1f2330;
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }

        .product-img {
            width: 100%;
            aspect-ratio: 1/1;
            background: #222;
            object-fit: cover;
            border-bottom: 1px solid #1f2330;
        }

        .product-info { padding: 10px; text-align: center; flex-grow: 1; }
        .product-info h3 { font-size: 0.8rem; margin: 0 0 5px 0; height: 32px; overflow: hidden; }
        .price { color: var(--accent); font-weight: bold; display: block; font-size: 0.9rem; }
        .p-code { font-size: 0.65rem; color: #444; margin-bottom: 8px; display: block; }

        .add-to-cart {
            background: var(--accent);
            color: white;
            border: none;
            width: 100%;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.75rem;
        }

        #cart-modal {
            display: none; position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 2000;
            justify-content: center; align-items: center;
        }
        .cart-content {
            background: #161a23; width: 90%; max-width: 400px;
            border-radius: 15px; padding: 20px; max-height: 80vh; overflow-y: auto;
        }
        .cart-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #25293a; font-size: 0.85rem;}
        .remove-item { color: var(--danger); cursor: pointer; font-size: 0.75rem; }

        #product-detail-view { display: none; padding: 20px 5%; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
    </style>
</head>
<body>

<header>
    <div class="logo">LETPIX PANEL</div>
    <div class="cart-box" onclick="toggleCart()">
        ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
        <span class="cart-count" id="cartCount">Û°</span>
    </div>
</header>

<div id="main-view">
    <div class="search-area">
        <input type="text" id="productSearch" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¯Ø± Ú©Ù„ Ù…Ø­ØµÙˆÙ„Ø§Øª..." onkeyup="searchProduct()">
    </div>

    <div class="section-divider"><span>Ù¾Ù†Ù„ Ù‡Ø§ÛŒ Ø§Ù‚ØªØµØ§Ø¯ÛŒ</span></div>
    <div class="container"><div class="products-grid" id="grid-eco"></div></div>

    <div class="section-divider"><span>Ù¾Ù†Ù„ Ù‚ÙˆÛŒ v2</span></div>
    <div class="container"><div class="products-grid" id="grid-v2"></div></div>

    <div class="section-divider"><span>Ù¾Ù†Ù„ XVIP</span></div>
    <div class="container"><div class="products-grid" id="grid-xvip"></div></div>

    <div class="section-divider"><span>Ù¾Ù†Ù„ internal mb</span></div>
    <div class="container"><div class="products-grid" id="grid-internal"></div></div>

    <div class="section-divider"><span>Ø¢Ù…ÙˆØ²Ø´ Ù‡Ø§</span></div>
    <div class="container"><div class="products-grid" id="grid-edu"></div></div>
</div>

<div id="product-detail-view">
    <div class="container">
        <div onclick="goHome()" style="cursor:pointer; color:var(--accent); margin-bottom:20px;">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</div>
        <div id="detail-body" style="background:var(--bg-card); padding:20px; border-radius:15px; text-align:justify;"></div>
    </div>
</div>

<div id="cart-modal" onclick="toggleCart()">
    <div class="cart-content" onclick="event.stopPropagation()">
        <h3>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h3>
        <div id="cartItemsList"></div>
        <div style="margin: 20px 0; font-weight: bold;">Ø¬Ù…Ø¹ Ú©Ù„: <span id="totalPrice" style="color:var(--accent)">Û°</span> ØªÙˆÙ…Ø§Ù†</div>
        <a href="https://daramet.com/mrsam_hemayat" style="display:block; background:var(--accent); color:white; text-align:center; padding:12px; border-radius:8px; text-decoration:none; font-weight:bold;">Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ù‡Ø§ÛŒÛŒ</a>
        <button onclick="toggleCart()" style="width:100%; margin-top:10px; background:none; border:none; color:#555; cursor:pointer;">Ø¨Ø³ØªÙ†</button>
    </div>
</div>

<script>
    const products = [
        { id: 1, cat: 'eco', name: "Ø±Ø¬Ø¯ÛŒØª Ø§Ø®ØªØµØ§ØµÛŒ", price: 35000, code: 1, img: "https://uploadkon.ir/uploads/157524_26InShot-20260125-184810849.jpg" },
        { id: 2, cat: 'eco', name: "Ù¾Ù†Ù„ Ù‡Ø¯Ø´Ø§Øª Ø§Ø®ØªØµØ§ØµÛŒ VIP", price: 70000, code: 2, img: "https://i.ibb.co/YrgXyhq/In-Shot-20260224-205823576.jpg" },
        
        { id: 3, cat: 'v2', name: "Ù¾Ù†Ù„ Ù‡Ø¯Ø´Ø§Øª v2 Ù‚ÙˆÛŒ (ÛŒÚ© Ù…Ø§Ù‡Ù‡)", price: 120000, code: 3, img: "https://uploadkon.ir/uploads/290825_26InShot-20260224-160601902.jpg" },
        { id: 7, cat: 'v2', name: "Ù¾Ù†Ù„ Ù‡Ø¯Ø´Ø§Øª v2 Ù‚ÙˆÛŒ (Ù¾Ù†Ø¬ Ù…Ø§Ù‡Ù‡)", price: 450000, code: 3, img: "https://uploadkon.ir/uploads/b41e24_26InShot-20260224-215702073.jpg" },
        { id: 8, cat: 'v2', name: "Ù¾Ù†Ù„ Ù‡Ø¯Ø´Ø§Øª v2 Ù‚ÙˆÛŒ (Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯)", price: 890000, code: 3, img: "https://uploadkon.ir/uploads/1cbe24_26InShot-20260224-225433176.jpg" },
        
        { id: 4, cat: 'xvip', name: "Ù¾Ù†Ù„ Ù‡Ø¯Ø´Ø§Øª xvip Ø¨Ø±Ø²ÛŒÙ„ÛŒ", price: 190000, code: 4, img: "white" },
        { id: 6, cat: 'internal', name: "Ù¾Ù†Ù„ internal mb Ø³ÙˆÙ¾Ø± Ù‚ÙˆÛŒ", price: 390000, code: 6, img: "white" },
        { id: 5, cat: 'edu', name: "Ø¯ÙˆØ±Ù‡ Ø³Ø§Ø®Øª Ù¾Ù†Ù„ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯", price: 1000000, code: 5, img: "white" }
    ];

    let cart = JSON.parse(localStorage.getItem('letpix_cart')) || [];

    function renderGrid(cat, elementId) {
        const grid = document.getElementById(elementId);
        const filtered = products.filter(p => p.cat === cat);
        grid.innerHTML = filtered.map(p => `
            <div class="product-card" onclick="showDetail(${p.id})">
                <img src="${p.img === 'white' ? 'https://via.placeholder.com/300/161a23/ffffff?text=LETPIX' : p.img}" class="product-img">
                <div class="product-info">
                    <h3>${p.name}</h3>
                    <span class="price">${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
                    <span class="p-code">Ú©Ø¯ Ù…Ø­ØµÙˆÙ„: ${p.code}</span>
                    <button class="add-to-cart" onclick="addToCart(event, ${p.id})">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯</button>
                </div>
            </div>
        `).join('');
    }

    function init() {
        renderGrid('eco', 'grid-eco');
        renderGrid('v2', 'grid-v2');
        renderGrid('xvip', 'grid-xvip');
        renderGrid('internal', 'grid-internal');
        renderGrid('edu', 'grid-edu');
        updateCartUI();
    }

    function addToCart(e, id) {
        e.stopPropagation();
        const p = products.find(i => i.id === id);
        cart.push(p);
        localStorage.setItem('letpix_cart', JSON.stringify(cart));
        updateCartUI();
        alert(p.name + " Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.");
    }

    function updateCartUI() {
        document.getElementById('cartCount').innerText = cart.length;
        const total = cart.reduce((s, i) => s + i.price, 0);
        document.getElementById('totalPrice').innerText = total.toLocaleString();
        document.getElementById('cartItemsList').innerHTML = cart.map((p, index) => `
            <div class="cart-item">
                <span>${p.name}</span>
                <span>${p.price.toLocaleString()} <span class="remove-item" onclick="removeFromCart(${index})">(Ø­Ø°Ù)</span></span>
            </div>
        `).join('') || "Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª.";
    }

    function removeFromCart(index) {
        cart.splice(index, 1);
        localStorage.setItem('letpix_cart', JSON.stringify(cart));
        updateCartUI();
    }

    function toggleCart() {
        const m = document.getElementById('cart-modal');
        m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
    }

    function showDetail(id) {
        const p = products.find(i => i.id === id);
        document.getElementById('main-view').style.display = 'none';
        document.getElementById('product-detail-view').style.display = 'block';
        window.scrollTo(0,0);
        document.getElementById('detail-body').innerHTML = `<h2>${p.name}</h2><p>ØªÙˆØ¶ÛŒØ­Ø§Øª ÙÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø¯ Ù…Ø­ØµÙˆÙ„ ${p.code} Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø¯Ø±Ø¬ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯. Ø§ÛŒÙ† Ù¾Ù†Ù„ Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† Ù…ØªØ¯Ù‡Ø§ÛŒ Ø¢Ù†ØªÛŒâ€ŒØ¨Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p><button class="add-to-cart" style="width:150px" onclick="addToCart(event, ${p.id})">Ø®Ø±ÛŒØ¯ Ø³Ø±ÛŒØ¹</button>`;
    }

    function goHome() {
        document.getElementById('main-view').style.display = 'block';
        document.getElementById('product-detail-view').style.display = 'none';
    }

    function searchProduct() {
        let input = document.getElementById('productSearch').value.toLowerCase();
        let cards = document.getElementsByClassName('product-card');
        let dividers = document.getElementsByClassName('section-divider');
        
        for (let div of dividers) div.style.display = input === "" ? "flex" : "none";

        for (let card of cards) {
            let title = card.querySelector('h3').innerText.toLowerCase();
            card.style.display = title.includes(input) ? "" : "none";
        }
    }

    init();
</script>

</body>
</html>
